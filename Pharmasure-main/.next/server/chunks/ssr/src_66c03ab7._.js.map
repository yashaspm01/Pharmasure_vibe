{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahes/OneDrive/Desktop/VIBE/Pharmasure-main/src/lib/pharma/constants.ts"],"sourcesContent":["\nexport const EXPIRING_SOON_DAYS = 30;\n"],"names":[],"mappings":";;;AACO,MAAM,qBAAqB","debugId":null}},
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahes/OneDrive/Desktop/VIBE/Pharmasure-main/src/lib/pharma/helpers.ts"],"sourcesContent":["\nimport type { StatusInfo } from './types';\nimport { EXPIRING_SOON_DAYS } from './constants';\n\nexport const formatDate = (date: string | Date | undefined): string => {\n  if (!date) return \"\";\n  try {\n    const d = date instanceof Date ? date : new Date(date);\n    if (isNaN(d.getTime())) return \"\";\n    return d.toISOString().split('T')[0];\n  } catch (error) {\n    return \"\";\n  }\n};\n\nexport const getDaysDiff = (expiryDate: string): number => {\n  if (!expiryDate) return Infinity;\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  const expiry = new Date(expiryDate);\n  if (isNaN(expiry.getTime())) return Infinity;\n  const diffTime = expiry.getTime() - today.getTime();\n  return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n};\n\nexport const getStatus = (expiryDate: string): StatusInfo => {\n  const diffDays = getDaysDiff(expiryDate);\n  if (diffDays === Infinity) return { text: 'Safe', color: 'text-green-500' };\n  if (diffDays < 0) return { text: 'Expired', color: 'text-red-500' };\n  if (diffDays <= EXPIRING_SOON_DAYS) return { text: 'Expiring soon', color: 'text-orange-500' };\n  return { text: 'Safe', color: 'text-green-500' };\n};\n"],"names":[],"mappings":";;;;;AAEA;;AAEO,MAAM,aAAa,CAAC;IACzB,IAAI,CAAC,MAAM,OAAO;IAClB,IAAI;QACF,MAAM,IAAI,gBAAgB,OAAO,OAAO,IAAI,KAAK;QACjD,IAAI,MAAM,EAAE,OAAO,KAAK,OAAO;QAC/B,OAAO,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IACtC,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAEO,MAAM,cAAc,CAAC;IAC1B,IAAI,CAAC,YAAY,OAAO;IACxB,MAAM,QAAQ,IAAI;IAClB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;IACxB,MAAM,SAAS,IAAI,KAAK;IACxB,IAAI,MAAM,OAAO,OAAO,KAAK,OAAO;IACpC,MAAM,WAAW,OAAO,OAAO,KAAK,MAAM,OAAO;IACjD,OAAO,KAAK,IAAI,CAAC,WAAW,CAAC,OAAO,KAAK,KAAK,EAAE;AAClD;AAEO,MAAM,YAAY,CAAC;IACxB,MAAM,WAAW,YAAY;IAC7B,IAAI,aAAa,UAAU,OAAO;QAAE,MAAM;QAAQ,OAAO;IAAiB;IAC1E,IAAI,WAAW,GAAG,OAAO;QAAE,MAAM;QAAW,OAAO;IAAe;IAClE,IAAI,YAAY,iIAAA,CAAA,qBAAkB,EAAE,OAAO;QAAE,MAAM;QAAiB,OAAO;IAAkB;IAC7F,OAAO;QAAE,MAAM;QAAQ,OAAO;IAAiB;AACjD","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahes/OneDrive/Desktop/VIBE/Pharmasure-main/src/components/pharma/Icons.tsx"],"sourcesContent":["import React from 'react';\n\nexport const ScanIcon: React.FC = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M3 7V5a2 2 0 0 1 2-2h2\" /><path d=\"M17 3h2a2 2 0 0 1 2 2v2\" /><path d=\"M21 17v2a2 2 0 0 1-2 2h-2\" /><path d=\"M7 21H5a2 2 0 0 1-2-2v-2\" /><path d=\"M7 12h10\" /></svg>;\nexport const SearchIcon: React.FC = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><circle cx=\"11\" cy=\"11\" r=\"8\" /><line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" /></svg>;\nexport const XIcon: React.FC = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg>;\nexport const PlusIcon: React.FC = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg>;\nexport const InventoryIcon: React.FC = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\"></path><path d=\"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\"></path></svg>;\nexport const DashboardIcon: React.FC = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><line x1=\"18\" y1=\"20\" x2=\"18\" y2=\"10\"></line><line x1=\"12\" y1=\"20\" x2=\"12\" y2=\"4\"></line><line x1=\"6\" y1=\"20\" x2=\"6\" y2=\"14\"></line></svg>;\nexport const MedicineBoxIcon: React.FC = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v2\"></path><path d=\"M21 14v-4\"></path><path d=\"M3 14v-4\"></path><path d=\"M12 18.17l-7-4V8.17l7 4 7-4v4.17\"></path><path d=\"M12 22l7-4\"></path><path d=\"M12 22l-7-4\"></path><path d=\"M12 13l7-4\"></path><path d=\"M12 13l-7-4\"></path></svg>;\nexport const ExclamationIcon: React.FC<{ className?: string }> = ({ className = \"text-red-600\" }) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line><line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line></svg>;\nexport const WarningTriangleIcon: React.FC = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-orange-500\"><path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path><line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line><line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line></svg>;\nexport const DollarSignIcon: React.FC = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-green-600\"><line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"23\"></line><path d=\"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\"></path></svg>;\nexport const CameraIcon: React.FC = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z\"></path><circle cx=\"12\" cy=\"13\" r=\"4\"></circle></svg>;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 562, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahes/OneDrive/Desktop/VIBE/Pharmasure-main/src/components/pharma/InventoryView.tsx"],"sourcesContent":["import React, { useState, useMemo, useRef } from 'react';\nimport type { Medication } from '@/lib/pharma/types';\nimport { getStatus } from '@/lib/pharma/helpers';\nimport { SearchIcon } from './Icons';\n\nconst HEADER_HEIGHT_PX = 112;\nconst FILTER_BAR_HEIGHT_PX = 53;\nconst ALPHABET_BAR_HEIGHT_PX = 48;\nconst TOTAL_STICKY_HEIGHT = HEADER_HEIGHT_PX + FILTER_BAR_HEIGHT_PX + ALPHABET_BAR_HEIGHT_PX;\n\ninterface InventoryViewProps {\n  meds: Medication[];\n  onOpenDetailSheet: (med: Medication) => void;\n  onLoadSampleData?: () => void;\n}\n\nconst InventoryView: React.FC<InventoryViewProps> = ({ meds, onOpenDetailSheet, onLoadSampleData }) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [activeFilter, setActiveFilter] = useState('All drugs');\n  const groupRefs = useRef<Record<string, HTMLHeadingElement | null>>({});\n\n  const filteredMeds = useMemo(() => {\n    return meds\n      .filter(med => activeFilter === 'All drugs' || getStatus(med.expiryDate).text === activeFilter)\n      .filter(med => med.name.toLowerCase().includes(searchTerm.toLowerCase()));\n  }, [meds, activeFilter, searchTerm]);\n\n  const groupedMeds = useMemo(() => {\n    const sortedMeds = [...filteredMeds].sort((a, b) => a.name.localeCompare(b.name));\n    return sortedMeds.reduce((acc, med) => {\n      let firstChar = med.name[0].toUpperCase();\n      if (!isNaN(parseInt(firstChar))) firstChar = '#';\n      if (!acc[firstChar]) acc[firstChar] = [];\n      acc[firstChar].push(med);\n      return acc;\n    }, {} as { [key: string]: Medication[] });\n  }, [filteredMeds]);\n\n  const alphabet = useMemo(() => ['#', ...Array.from({ length: 26 }, (_, i) => String.fromCharCode(65 + i))], []);\n  \n  const sortedGroupKeys = Object.keys(groupedMeds).sort((a, b) => {\n      if (a === '#') return -1;\n      if (b === '#') return 1;\n      return a.localeCompare(b);\n  });\n\n  const handleJumpTo = (letter: string) => {\n    groupRefs.current[letter]?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  return (\n    <>\n      <header className=\"h-28 border-b border-gray-200 sticky top-0 bg-white z-20 flex flex-col justify-center\">\n        <div className=\"p-4\">\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Pharmasure</h1>\n            <div className=\"relative\">\n                <span className=\"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400\"><SearchIcon /></span>\n                <input\n                    type=\"text\"\n                    placeholder=\"Search for Drug...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"w-full bg-gray-100 border border-gray-300 rounded-lg py-2 pl-10 pr-4 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n            </div>\n        </div>\n      </header>\n\n      <div className=\"px-4 py-3 flex space-x-2 border-b border-gray-200 sticky bg-white z-20 overflow-x-auto scrollbar-hide\" style={{ top: `${HEADER_HEIGHT_PX}px` }}>\n        {['All drugs', 'Expired', 'Expiring soon', 'Safe'].map(filter => (\n          <button\n            key={filter}\n            onClick={() => setActiveFilter(filter)}\n            className={`px-3 py-1 text-sm rounded-full transition-colors whitespace-nowrap ${activeFilter === filter ? 'bg-blue-600 text-white shadow' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`}\n          >\n            {filter}\n          </button>\n        ))}\n      </div>\n      \n      <div className=\"sticky bg-white z-20 border-b border-gray-200\" style={{ top: `${HEADER_HEIGHT_PX + FILTER_BAR_HEIGHT_PX}px` }}>\n        <div className=\"flex justify-between items-center px-2 py-2 overflow-x-auto scrollbar-hide\">\n          {alphabet.map(letter => (\n            <button key={letter} onClick={() => handleJumpTo(letter)} className=\"px-2.5 py-1 text-sm font-semibold text-gray-500 hover:text-blue-600 rounded disabled:opacity-30 disabled:hover:text-gray-500\" disabled={!groupedMeds[letter]}>\n              {letter}\n            </button>\n          ))}\n        </div>\n      </div>\n\n\n      <main className=\"flex-grow overflow-y-auto\" style={{ paddingTop: `${TOTAL_STICKY_HEIGHT}px`, marginTop: `-${TOTAL_STICKY_HEIGHT}px` }}>\n        <div className=\"px-4 pb-20\">\n            {meds.length === 0 && activeFilter === 'All drugs' && !searchTerm ? (\n                <div className=\"text-center mt-16 px-4\">\n                    <div className=\"max-w-sm mx-auto\">\n                        <svg className=\"mx-auto h-16 w-16 text-gray-400 mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\n                        </svg>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Your Inventory is Empty</h3>\n                        <p className=\"text-gray-500 mb-6\">Start adding medications using the + button below, or load sample data to explore the app.</p>\n                        {onLoadSampleData && (\n                            <button \n                                onClick={onLoadSampleData}\n                                className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                            >\n                                <svg className=\"h-5 w-5 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n                                </svg>\n                                Load Sample Data\n                            </button>\n                        )}\n                    </div>\n                </div>\n            ) : sortedGroupKeys.length === 0 ? (\n                <div className=\"text-center text-gray-500 mt-10\"><p>No medications match your criteria.</p></div>\n            ) : (\n                sortedGroupKeys.map(group => (\n                    <div key={group} className=\"mb-4\">\n                        <h2 ref={el => { groupRefs.current[group] = el; }} className=\"text-sm font-bold text-gray-400 mb-2 border-b border-gray-200 pb-1 pt-4 sticky bg-white z-10\" style={{top: 0}}>{group}</h2>\n                        <ul>\n                            {groupedMeds[group].map(med => {\n                                const status = getStatus(med.expiryDate);\n                                return (\n                                    <li\n                                        key={med.id}\n                                        onClick={() => onOpenDetailSheet(med)}\n                                        className=\"flex justify-between items-center py-2.5 cursor-pointer hover:bg-gray-100 rounded-md px-2\"\n                                    >\n                                        <span className=\"font-medium\">{med.name}</span>\n                                        <span className={`text-sm font-semibold ${status.color}`}>{status.text}</span>\n                                    </li>\n                                );\n                            })}\n                        </ul>\n                    </div>\n                ))\n            )}\n        </div>\n      </main>\n    </>\n  );\n};\n\nexport default InventoryView;\n"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;;;;;AAEA,MAAM,mBAAmB;AACzB,MAAM,uBAAuB;AAC7B,MAAM,yBAAyB;AAC/B,MAAM,sBAAsB,mBAAmB,uBAAuB;AAQtE,MAAM,gBAA8C,CAAC,EAAE,IAAI,EAAE,iBAAiB,EAAE,gBAAgB,EAAE;IAChG,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,YAAY,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAA6C,CAAC;IAErE,MAAM,eAAe,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QAC3B,OAAO,KACJ,MAAM,CAAC,CAAA,MAAO,iBAAiB,eAAe,CAAA,GAAA,+HAAA,CAAA,YAAS,AAAD,EAAE,IAAI,UAAU,EAAE,IAAI,KAAK,cACjF,MAAM,CAAC,CAAA,MAAO,IAAI,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW;IACzE,GAAG;QAAC;QAAM;QAAc;KAAW;IAEnC,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QAC1B,MAAM,aAAa;eAAI;SAAa,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI;QAC/E,OAAO,WAAW,MAAM,CAAC,CAAC,KAAK;YAC7B,IAAI,YAAY,IAAI,IAAI,CAAC,EAAE,CAAC,WAAW;YACvC,IAAI,CAAC,MAAM,SAAS,aAAa,YAAY;YAC7C,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,UAAU,GAAG,EAAE;YACxC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC;YACpB,OAAO;QACT,GAAG,CAAC;IACN,GAAG;QAAC;KAAa;IAEjB,MAAM,WAAW,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE,IAAM;YAAC;eAAQ,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAG,GAAG,CAAC,GAAG,IAAM,OAAO,YAAY,CAAC,KAAK;SAAI,EAAE,EAAE;IAE9G,MAAM,kBAAkB,OAAO,IAAI,CAAC,aAAa,IAAI,CAAC,CAAC,GAAG;QACtD,IAAI,MAAM,KAAK,OAAO,CAAC;QACvB,IAAI,MAAM,KAAK,OAAO;QACtB,OAAO,EAAE,aAAa,CAAC;IAC3B;IAEA,MAAM,eAAe,CAAC;QACpB,UAAU,OAAO,CAAC,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IACjE;IAEA,qBACE;;0BACE,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAG,WAAU;sCAAwC;;;;;;sCACtD,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAK,WAAU;8CAAiE,cAAA,8OAAC,qIAAA,CAAA,aAAU;;;;;;;;;;8CAC5F,8OAAC;oCACG,MAAK;oCACL,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;oCAC7C,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAMxB,8OAAC;gBAAI,WAAU;gBAAwG,OAAO;oBAAE,KAAK,GAAG,iBAAiB,EAAE,CAAC;gBAAC;0BAC1J;oBAAC;oBAAa;oBAAW;oBAAiB;iBAAO,CAAC,GAAG,CAAC,CAAA,uBACrD,8OAAC;wBAEC,SAAS,IAAM,gBAAgB;wBAC/B,WAAW,CAAC,mEAAmE,EAAE,iBAAiB,SAAS,kCAAkC,+CAA+C;kCAE3L;uBAJI;;;;;;;;;;0BASX,8OAAC;gBAAI,WAAU;gBAAgD,OAAO;oBAAE,KAAK,GAAG,mBAAmB,qBAAqB,EAAE,CAAC;gBAAC;0BAC1H,cAAA,8OAAC;oBAAI,WAAU;8BACZ,SAAS,GAAG,CAAC,CAAA,uBACZ,8OAAC;4BAAoB,SAAS,IAAM,aAAa;4BAAS,WAAU;4BAA+H,UAAU,CAAC,WAAW,CAAC,OAAO;sCAC9N;2BADU;;;;;;;;;;;;;;;0BAQnB,8OAAC;gBAAK,WAAU;gBAA4B,OAAO;oBAAE,YAAY,GAAG,oBAAoB,EAAE,CAAC;oBAAE,WAAW,CAAC,CAAC,EAAE,oBAAoB,EAAE,CAAC;gBAAC;0BAClI,cAAA,8OAAC;oBAAI,WAAU;8BACV,KAAK,MAAM,KAAK,KAAK,iBAAiB,eAAe,CAAC,2BACnD,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAU;oCAAuC,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CACzF,cAAA,8OAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;8CAEzE,8OAAC;oCAAG,WAAU;8CAA2C;;;;;;8CACzD,8OAAC;oCAAE,WAAU;8CAAqB;;;;;;gCACjC,kCACG,8OAAC;oCACG,SAAS;oCACT,WAAU;;sDAEV,8OAAC;4CAAI,WAAU;4CAAe,MAAK;4CAAO,SAAQ;4CAAY,QAAO;sDACjE,cAAA,8OAAC;gDAAK,eAAc;gDAAQ,gBAAe;gDAAQ,aAAa;gDAAG,GAAE;;;;;;;;;;;wCACnE;;;;;;;;;;;;;;;;;+BAMtB,gBAAgB,MAAM,KAAK,kBAC3B,8OAAC;wBAAI,WAAU;kCAAkC,cAAA,8OAAC;sCAAE;;;;;;;;;;+BAEpD,gBAAgB,GAAG,CAAC,CAAA,sBAChB,8OAAC;4BAAgB,WAAU;;8CACvB,8OAAC;oCAAG,KAAK,CAAA;wCAAQ,UAAU,OAAO,CAAC,MAAM,GAAG;oCAAI;oCAAG,WAAU;oCAA+F,OAAO;wCAAC,KAAK;oCAAC;8CAAI;;;;;;8CAC9K,8OAAC;8CACI,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;wCACpB,MAAM,SAAS,CAAA,GAAA,+HAAA,CAAA,YAAS,AAAD,EAAE,IAAI,UAAU;wCACvC,qBACI,8OAAC;4CAEG,SAAS,IAAM,kBAAkB;4CACjC,WAAU;;8DAEV,8OAAC;oDAAK,WAAU;8DAAe,IAAI,IAAI;;;;;;8DACvC,8OAAC;oDAAK,WAAW,CAAC,sBAAsB,EAAE,OAAO,KAAK,EAAE;8DAAG,OAAO,IAAI;;;;;;;2CALjE,IAAI,EAAE;;;;;oCAQvB;;;;;;;2BAfE;;;;;;;;;;;;;;;;;AAwB9B;uCAEe","debugId":null}},
    {"offset": {"line": 908, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahes/OneDrive/Desktop/VIBE/Pharmasure-main/src/components/pharma/MetricCard.tsx"],"sourcesContent":["\nimport React from 'react';\n\ninterface MetricCardProps {\n  title: string;\n  value: string | number;\n  icon: React.ReactNode;\n  iconBg: string;\n  iconColor: string;\n}\n\nconst MetricCard: React.FC<MetricCardProps> = ({ title, value, icon, iconBg, iconColor }) => {\n  return (\n    <div className=\"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col justify-between\">\n      <div className=\"flex justify-between items-center mb-2\">\n        <span className=\"text-sm font-medium text-gray-500\">{title}</span>\n        <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${iconBg} ${iconColor}`}>\n          {icon}\n        </div>\n      </div>\n      <p className=\"text-2xl font-bold text-gray-900\">{value}</p>\n    </div>\n  );\n};\n\nexport default MetricCard;\n"],"names":[],"mappings":";;;;;AAWA,MAAM,aAAwC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE;IACtF,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;kCAAqC;;;;;;kCACrD,8OAAC;wBAAI,WAAW,CAAC,oDAAoD,EAAE,OAAO,CAAC,EAAE,WAAW;kCACzF;;;;;;;;;;;;0BAGL,8OAAC;gBAAE,WAAU;0BAAoC;;;;;;;;;;;;AAGvD;uCAEe","debugId":null}},
    {"offset": {"line": 964, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahes/OneDrive/Desktop/VIBE/Pharmasure-main/src/components/pharma/AlertList.tsx"],"sourcesContent":["import React from 'react';\nimport type { Medication } from '@/lib/pharma/types';\nimport { formatDate } from '@/lib/pharma/helpers';\n\ninterface AlertListProps {\n  title: string;\n  icon: React.ReactNode;\n  count: number;\n  meds: Medication[];\n}\n\nconst AlertList: React.FC<AlertListProps> = ({ title, icon, count, meds }) => {\n  return (\n    <div className=\"bg-white p-4 rounded-xl border border-gray-200 shadow-sm\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <div className=\"flex items-center space-x-2\">\n          {icon}\n          <h4 className=\"text-lg font-semibold text-gray-800\">{title}</h4>\n        </div>\n        <span className=\"text-sm font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-full\">{count} items</span>\n      </div>\n      {meds.length > 0 ? (\n        <div className=\"max-h-64 overflow-y-auto pr-2\">\n            <ul className=\"space-y-2\">\n                {meds.map(med => (\n                    <li key={med.id} className=\"text-sm text-gray-600 flex justify-between items-center p-2 rounded-md hover:bg-gray-50\">\n                        <div>\n                            <p className=\"font-semibold text-gray-800\">{med.name}</p>\n                            <p className=\"text-xs text-gray-500\">Expires: {formatDate(med.expiryDate)}</p>\n                        </div>\n                        <span className=\"font-medium\">{med.stock} pcs</span>\n                    </li>\n                ))}\n            </ul>\n        </div>\n       ) : (\n        <p className=\"text-sm text-gray-500 text-center py-4\">Nothing to show here.</p>\n       )}\n    </div>\n  );\n};\n\nexport default AlertList;\n"],"names":[],"mappings":";;;;AAEA;;;AASA,MAAM,YAAsC,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;IACvE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;4BACZ;0CACD,8OAAC;gCAAG,WAAU;0CAAuC;;;;;;;;;;;;kCAEvD,8OAAC;wBAAK,WAAU;;4BAAwE;4BAAM;;;;;;;;;;;;;YAE/F,KAAK,MAAM,GAAG,kBACb,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAG,WAAU;8BACT,KAAK,GAAG,CAAC,CAAA,oBACN,8OAAC;4BAAgB,WAAU;;8CACvB,8OAAC;;sDACG,8OAAC;4CAAE,WAAU;sDAA+B,IAAI,IAAI;;;;;;sDACpD,8OAAC;4CAAE,WAAU;;gDAAwB;gDAAU,CAAA,GAAA,+HAAA,CAAA,aAAU,AAAD,EAAE,IAAI,UAAU;;;;;;;;;;;;;8CAE5E,8OAAC;oCAAK,WAAU;;wCAAe,IAAI,KAAK;wCAAC;;;;;;;;2BALpC,IAAI,EAAE;;;;;;;;;;;;;;qCAW3B,8OAAC;gBAAE,WAAU;0BAAyC;;;;;;;;;;;;AAI9D;uCAEe","debugId":null}},
    {"offset": {"line": 1095, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahes/OneDrive/Desktop/VIBE/Pharmasure-main/src/components/pharma/DashboardView.tsx"],"sourcesContent":["'use client';\n\nimport React, { useMemo, useState } from 'react';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport type { Medication } from '@/lib/pharma/types';\nimport { getStatus } from '@/lib/pharma/helpers';\nimport { MedicineBoxIcon, ExclamationIcon, WarningTriangleIcon, DollarSignIcon } from './Icons';\nimport MetricCard from './MetricCard';\nimport AlertList from './AlertList';\n\n// Generate trend data based on current medication statuses\nconst generateTrendData = (meds: Medication[]) => {\n    const today = new Date();\n    const expired = meds.filter(m => getStatus(m.expiryDate).text === 'Expired').length;\n    const expiringSoon = meds.filter(m => getStatus(m.expiryDate).text === 'Expiring soon').length;\n    \n    return {\n        'Last 7 Days': Array.from({ length: 7 }, (_, i) => ({ \n            name: new Date(today.getTime() - (6-i) * 24*60*60*1000).toLocaleDateString('en', { weekday: 'short' }), \n            'Expiring Soon': Math.floor(expiringSoon * (0.8 + Math.random() * 0.4) / 7), \n            'Expired': Math.floor(expired * (0.8 + Math.random() * 0.4) / 7) \n        })),\n        'Month': Array.from({ length: 4 }, (_, i) => ({ \n            name: `Week ${i + 1}`, \n            'Expiring Soon': Math.floor(expiringSoon * (0.2 + Math.random() * 0.3)), \n            'Expired': Math.floor(expired * (0.2 + Math.random() * 0.3)) \n        })),\n        'Quarter': Array.from({ length: 3 }, (_, i) => ({\n            name: new Date(today.getFullYear(), today.getMonth() - (2-i), 1).toLocaleDateString('en', { month: 'short' }),\n            'Expiring Soon': Math.floor(expiringSoon * (0.25 + Math.random() * 0.35)),\n            'Expired': Math.floor(expired * (0.25 + Math.random() * 0.35))\n        })),\n        'Year': Array.from({ length: 4 }, (_, i) => ({ \n            name: `Q${i + 1}`, \n            'Expiring Soon': Math.floor(expiringSoon * (0.2 + Math.random() * 0.3)), \n            'Expired': Math.floor(expired * (0.2 + Math.random() * 0.3)) \n        })),\n    };\n};\n\nconst DashboardView: React.FC<{ meds: Medication[] }> = ({ meds }) => {\n    const [activeTrend, setActiveTrend] = useState('Month');\n    const allTrendData = useMemo(() => generateTrendData(meds), [meds]);\n\n    const analysisData = useMemo(() => {\n        const expired = meds.filter(m => getStatus(m.expiryDate).text === 'Expired');\n        const expiringSoon = meds.filter(m => getStatus(m.expiryDate).text === 'Expiring soon');\n        const totalValue = meds.reduce((acc, med) => {\n            // Mock price calculation for demonstration\n            const mockPrice = (med.name.length % 5) * 10 + 50; // Price between 50-90\n            return acc + (med.stock * mockPrice);\n        }, 0);\n\n        return {\n            totalMeds: meds.length,\n            expiredCount: expired.length,\n            expiringSoonCount: expiringSoon.length,\n            totalValue,\n            expiredMeds: expired.sort((a,b) => new Date(a.expiryDate).getTime() - new Date(b.expiryDate).getTime()),\n            expiringSoonMeds: expiringSoon.sort((a,b) => new Date(a.expiryDate).getTime() - new Date(b.expiryDate).getTime()),\n        };\n    }, [meds]);\n\n    if (meds.length === 0) {\n        return (\n            <div className=\"flex flex-col items-center justify-center h-full p-8\">\n                <h3 className=\"text-xl font-semibold text-gray-700 mb-2\">No Medications Yet</h3>\n                <p className=\"text-gray-500 text-center\">Start adding medications to see analytics and insights here.</p>\n            </div>\n        );\n    }\n\n    return (\n        <>\n            <header className=\"h-28 border-b border-gray-200 sticky top-0 bg-white z-10 flex items-center p-4\">\n                <h1 className=\"text-2xl font-bold text-gray-900\">Reports & Analytics</h1>\n            </header>\n            <main className=\"flex-grow overflow-y-auto pb-20 bg-gray-50\">\n                <div className=\"p-4 space-y-6\">\n                    <div>\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Key Metrics</h3>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <MetricCard title=\"Total Medicines\" value={analysisData.totalMeds} icon={<MedicineBoxIcon />} iconBg=\"bg-blue-100\" iconColor=\"text-blue-600\" />\n                            <MetricCard title=\"Expired\" value={analysisData.expiredCount} icon={<ExclamationIcon />} iconBg=\"bg-red-100\" iconColor=\"text-red-600\" />\n                            <MetricCard title=\"Expiring Soon\" value={analysisData.expiringSoonCount} icon={<WarningTriangleIcon />} iconBg=\"bg-orange-100\" iconColor=\"text-orange-600\" />\n                            <MetricCard title=\"Total Value\" value={`â‚¹${analysisData.totalValue.toLocaleString('en-IN')}`} icon={<DollarSignIcon />} iconBg=\"bg-green-100\" iconColor=\"text-green-600\" />\n                        </div>\n                    </div>\n\n                    <div className=\"bg-white rounded-xl p-4 border border-gray-200 shadow-sm\">\n                        <h3 className=\"font-bold mb-4 text-lg text-gray-700\">Expiry Trends</h3>\n                        <div className=\"flex space-x-2 overflow-x-auto scrollbar-hide mb-4\">\n                            {['Last 7 Days', 'Month', 'Quarter', 'Year'].map(filter => (\n                                <button key={filter} onClick={() => setActiveTrend(filter)} className={`px-4 py-2 text-sm font-medium rounded-full transition-colors whitespace-nowrap ${activeTrend === filter ? 'bg-blue-600 text-white shadow' : 'bg-white text-gray-700 border border-gray-200 hover:bg-gray-100'}`}>{filter}</button>\n                            ))}\n                        </div>\n                        <div style={{ width: '100%', height: 250 }}>\n                            <ResponsiveContainer>\n                                <BarChart data={allTrendData[activeTrend as keyof typeof allTrendData]} margin={{ top: 5, right: 0, left: -20, bottom: 5 }}>\n                                    <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#e5e7eb\" />\n                                    <XAxis dataKey=\"name\" tick={{ fontSize: 12, fill: '#6b7280' }} axisLine={false} tickLine={false} />\n                                    <YAxis tick={{ fontSize: 12, fill: '#6b7280' }} axisLine={false} tickLine={false} />\n                                    <Tooltip contentStyle={{ backgroundColor: '#ffffff', border: '1px solid #e5e7eb', borderRadius: '0.5rem' }} />\n                                    <Legend iconType=\"circle\" wrapperStyle={{ fontSize: '14px', paddingTop: '10px' }} />\n                                    <Bar dataKey=\"Expiring Soon\" fill=\"#f97316\" radius={[4, 4, 0, 0]} barSize={15} />\n                                    <Bar dataKey=\"Expired\" fill=\"#ef4444\" radius={[4, 4, 0, 0]} barSize={15} />\n                                </BarChart>\n                            </ResponsiveContainer>\n                        </div>\n                    </div>\n                    \n                    <div className=\"space-y-4\">\n                        <AlertList title=\"Recently Expired\" icon={<ExclamationIcon />} count={analysisData.expiredCount} meds={analysisData.expiredMeds} />\n                        <AlertList title=\"Nearing Expiry\" icon={<WarningTriangleIcon />} count={analysisData.expiringSoonCount} meds={analysisData.expiringSoonMeds} />\n                    </div>\n                </div>\n            </main>\n        </>\n    );\n};\n\nexport default DashboardView;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1531, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahes/OneDrive/Desktop/VIBE/Pharmasure-main/src/components/pharma/BottomNavBar.tsx"],"sourcesContent":["\nimport React from 'react';\nimport type { ViewType } from '@/lib/pharma/types';\nimport { InventoryIcon, DashboardIcon, PlusIcon } from './Icons';\n\ninterface BottomNavBarProps {\n  activeView: ViewType;\n  onNavigate: (view: ViewType) => void;\n  onAdd: () => void;\n}\n\nconst BottomNavBar: React.FC<BottomNavBarProps> = ({ activeView, onNavigate, onAdd }) => {\n  const navButtonClass = (viewName: ViewType) =>\n    `flex flex-col items-center justify-center flex-1 p-2 rounded-lg transition-colors ${\n      activeView === viewName ? 'text-blue-600' : 'text-gray-500 hover:text-gray-800'\n    }`;\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 w-full max-w-md mx-auto h-16 bg-white border-t border-gray-200 flex justify-around items-center z-30\">\n      <button onClick={() => onNavigate('inventory')} className={navButtonClass('inventory')}>\n        <InventoryIcon />\n        <span className=\"text-xs font-medium mt-1\">Inventory</span>\n      </button>\n      \n      <button onClick={onAdd} className=\"w-16 h-16 bg-blue-600 text-white rounded-full flex items-center justify-center -mt-8 shadow-lg hover:bg-blue-700 transition-all transform hover:scale-110 active:scale-100\">\n        <PlusIcon />\n      </button>\n\n      <button onClick={() => onNavigate('dashboard')} className={navButtonClass('dashboard')}>\n        <DashboardIcon />\n        <span className=\"text-xs font-medium mt-1\">Dashboard</span>\n      </button>\n    </nav>\n  );\n};\n\nexport default BottomNavBar;\n"],"names":[],"mappings":";;;;AAGA;;;AAQA,MAAM,eAA4C,CAAC,EAAE,UAAU,EAAE,UAAU,EAAE,KAAK,EAAE;IAClF,MAAM,iBAAiB,CAAC,WACtB,CAAC,kFAAkF,EACjF,eAAe,WAAW,kBAAkB,qCAC5C;IAEJ,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAO,SAAS,IAAM,WAAW;gBAAc,WAAW,eAAe;;kCACxE,8OAAC,qIAAA,CAAA,gBAAa;;;;;kCACd,8OAAC;wBAAK,WAAU;kCAA2B;;;;;;;;;;;;0BAG7C,8OAAC;gBAAO,SAAS;gBAAO,WAAU;0BAChC,cAAA,8OAAC,qIAAA,CAAA,WAAQ;;;;;;;;;;0BAGX,8OAAC;gBAAO,SAAS,IAAM,WAAW;gBAAc,WAAW,eAAe;;kCACxE,8OAAC,qIAAA,CAAA,gBAAa;;;;;kCACd,8OAAC;wBAAK,WAAU;kCAA2B;;;;;;;;;;;;;;;;;;AAInD;uCAEe","debugId":null}},
    {"offset": {"line": 1616, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahes/OneDrive/Desktop/VIBE/Pharmasure-main/src/ai/flows/medicine-label-analysis.ts"],"sourcesContent":["\n'use server';\n\n/**\n * @fileOverview An AI agent that extracts key details from a medicine label image using OCR.\n *\n * - analyzeMedicineLabel - A function that handles the medicine label analysis.\n * - MedicineLabelAnalysisInput - The input type for the analyzeMedicineLabel function.\n * - MedicineLabelAnalysisOutput - The return type for the analyzeMedicineLabel function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst MedicineLabelAnalysisInputSchema = z.object({\n  medicineImage: z\n    .string()\n    .describe(\n      \"A photo of a medicine label, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'.\"\n    ),\n});\nexport type MedicineLabelAnalysisInput = z.infer<typeof MedicineLabelAnalysisInputSchema>;\n\nconst MedicineLabelAnalysisOutputSchema = z.object({\n  isMedicineLabel: z.boolean().describe('Whether the image appears to be a medicine label or box.'),\n  medicineName: z.string().describe('The name of the medicine.'),\n  strength: z.string().optional().describe('The strength of the medicine (e.g., 500mg, 10ml). This is often the same as dosage.'),\n  manufacturer: z.string().optional().describe('The name of the company that manufactured the medicine.'),\n  manufactureDate: z.string().describe('The manufacturing date found on the label (e.g., \"Jan 2023\", \"01/23\").'),\n  expiryDate: z.string().describe('The expiry date found on the label (e.g., \"Dec 2025\", \"12/25\"). This field is required.'),\n  batchNumber: z.string().optional().describe('The batch number of the medicine, often labeled as \"B.No.\" or \"Batch No.\"'),\n});\nexport type MedicineLabelAnalysisOutput = z.infer<typeof MedicineLabelAnalysisOutputSchema>;\n\nexport async function analyzeMedicineLabel(\n  input: MedicineLabelAnalysisInput\n): Promise<MedicineLabelAnalysisOutput> {\n  return medicineLabelAnalysisFlow(input);\n}\n\nconst medicineLabelAnalysisPrompt = ai.definePrompt({\n  name: 'medicineLabelAnalysisPrompt',\n  input: {schema: MedicineLabelAnalysisInputSchema},\n  output: {schema: MedicineLabelAnalysisOutputSchema},\n  prompt: `You are an AI assistant specialized in analyzing medicine labels.\n\n  Your first task is to determine if the provided image is a medicine label, box, or crimp part of a tablet strip.\n  - If it is, set 'isMedicineLabel' to true and extract the details.\n  - If it is NOT a medicine label (e.g., a picture of a car, a landscape, a person), set 'isMedicineLabel' to false and leave the other fields empty.\n\n\n  Analyze the provided image and extract the following details:\n  1. The name of the medicine.\n  2. The strength of the medicine (e.g., 500mg, 10ml).\n  3. The manufacturer's name.\n  4. The manufacturing date.\n  5. The expiry date. This is a required field.\n  6. The batch number (often labeled as \"B.No.\" or similar).\n\n\n  Here is the image:\n  {{media url=medicineImage}}\n\n  Return a JSON object containing the extracted details. If a detail is not visible, return an empty string for that field.\n  `,\n});\n\nconst medicineLabelAnalysisFlow = ai.defineFlow(\n  {\n    name: 'medicineLabelAnalysisFlow',\n    inputSchema: MedicineLabelAnalysisInputSchema,\n    outputSchema: MedicineLabelAnalysisOutputSchema,\n  },\n  async input => {\n    const {output} = await medicineLabelAnalysisPrompt(input);\n    return output!;\n  }\n);\n"],"names":[],"mappings":";;;;;;IAkCsB,uBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 1629, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahes/OneDrive/Desktop/VIBE/Pharmasure-main/src/components/pharma/MedicationDetailSheet.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport type { Medication } from '@/lib/pharma/types';\nimport { formatDate } from '@/lib/pharma/helpers';\nimport { analyzeMedicineLabel } from '@/ai/flows/medicine-label-analysis';\nimport { XIcon, CameraIcon } from './Icons';\nimport { useToast } from '@/hooks/use-toast';\nimport { getStorage } from 'firebase/storage';\nimport { uploadImageAndGetURL } from '@/services/storage-service';\n\n// --- Camera View Component ---\ninterface CameraViewProps {\n  onCapture: (file: File) => void;\n  onClose: () => void;\n  setCameraError: (error: string) => void;\n}\nconst CameraView: React.FC<CameraViewProps> = ({ onCapture, onClose, setCameraError }) => {\n    const videoRef = useRef<HTMLVideoElement>(null);\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n\n    useEffect(() => {\n        let stream: MediaStream | null = null;\n        const startCamera = async () => {\n            try {\n                stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });\n                if (videoRef.current) {\n                    videoRef.current.srcObject = stream;\n                }\n            } catch (err) {\n                console.error(\"Camera Error:\", err);\n                setCameraError(\"Could not access camera. Please check permissions.\");\n                onClose();\n            }\n        };\n        startCamera();\n        return () => {\n            stream?.getTracks().forEach(track => track.stop());\n        };\n    }, [onClose, setCameraError]);\n\n    const handleCapture = () => {\n        if (videoRef.current && canvasRef.current) {\n            const context = canvasRef.current.getContext('2d');\n            if(context) {\n                canvasRef.current.width = videoRef.current.videoWidth;\n                canvasRef.current.height = videoRef.current.videoHeight;\n                context.drawImage(videoRef.current, 0, 0, videoRef.current.videoWidth, videoRef.current.videoHeight);\n                canvasRef.current.toBlob(blob => {\n                    if (blob) {\n                        onCapture(new File([blob], \"capture.jpg\", { type: \"image/jpeg\" }));\n                    }\n                }, 'image/jpeg');\n            }\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black z-50 flex flex-col items-center justify-center\">\n            <video ref={videoRef} autoPlay playsInline className=\"w-full h-full object-cover\"></video>\n            <canvas ref={canvasRef} className=\"hidden\"></canvas>\n            <button \n              onClick={onClose} \n              className=\"absolute top-5 right-5 text-white bg-black bg-opacity-60 rounded-full py-2 px-4 flex items-center gap-2 text-lg font-semibold hover:bg-opacity-80 transition-colors\"\n            >\n                <XIcon />\n                <span>Back</span>\n            </button>\n            <div className=\"absolute bottom-8 flex flex-col items-center\">\n                <p className=\"text-white text-sm bg-black bg-opacity-50 px-3 py-1 rounded-full mb-4\">Position camera over medication package</p>\n                <button onClick={handleCapture} className=\"w-20 h-20 bg-white rounded-full border-4 border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black focus:ring-white\"></button>\n            </div>\n        </div>\n    );\n};\n\n\n// --- Main Detail Sheet Component ---\ninterface MedicationDetailSheetProps {\n  isOpen: boolean;\n  med: Medication | null;\n  onSave: (medData: Omit<Medication, 'id'> & { id?: string }) => void;\n  onRemove: (id: string) => void;\n  onClose: () => void;\n}\n\nconst MedicationDetailSheet: React.FC<MedicationDetailSheetProps> = ({ isOpen, med, onSave, onRemove, onClose }) => {\n  const [name, setName] = useState('');\n  const [expiryDate, setExpiryDate] = useState('');\n  const [stock, setStock] = useState('');\n  const [isScanning, setIsScanning] = useState(false);\n  const [scanError, setScanError] = useState('');\n  const [showCamera, setShowCamera] = useState(false);\n  const [manufacturer, setManufacturer] = useState('');\n  const [batchNumber, setBatchNumber] = useState('');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (isOpen) {\n      setName(med?.name || '');\n      setExpiryDate(formatDate(med?.expiryDate));\n      setStock(med?.stock?.toString() || '');\n      setScanError('');\n      setShowCamera(false);\n    }\n  }, [med, isOpen]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSave({ id: med?.id, name, expiryDate, stock: parseInt(stock) || 0 });\n  };\n  \n  const handleRemove = () => {\n    if(med?.id && window.confirm(`Are you sure you want to remove ${med.name}?`)) {\n        onRemove(med.id);\n    }\n  }\n\n  const fileToDataUri = (file: File): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result as string);\n      reader.onerror = reject;\n      reader.readAsDataURL(file);\n    });\n  };\n\n  const handleFileScan = async (file: File) => {\n    if (!file) return;\n    setIsScanning(true);\n    setScanError('');\n    try {\n      const medicineImage = await fileToDataUri(file);\n      const analysisResult = await analyzeMedicineLabel({ medicineImage });\n      \n      if (!analysisResult.isMedicineLabel) {\n        setScanError(\"This doesn't look like a medicine label. Please upload a clear image.\");\n        toast({ title: 'Not a Medicine Label', variant: 'destructive' });\n        return;\n      }\n      \n      if (analysisResult.medicineName) setName(analysisResult.medicineName);\n      if (analysisResult.expiryDate) setExpiryDate(formatDate(analysisResult.expiryDate));\n      if (analysisResult.manufacturer) setManufacturer(analysisResult.manufacturer);\n      if (analysisResult.batchNumber) setBatchNumber(analysisResult.batchNumber);\n      \n      toast({ title: 'Scan Successful', description: 'Medicine details extracted!' });\n    } catch (error) {\n      console.error('Scan error:', error);\n      setScanError(error instanceof Error ? error.message : \"An unknown error occurred.\");\n      toast({ title: 'Scan Failed', variant: 'destructive' });\n    } finally {\n      setIsScanning(false);\n      if(fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  const onCameraCapture = (file: File) => {\n      setShowCamera(false);\n      handleFileScan(file);\n  };\n  \n  const onFileInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) handleFileScan(file);\n  };\n\n  return (\n    <>\n      <div className={`fixed inset-0 bg-black transition-opacity duration-300 z-40 ${isOpen ? 'bg-opacity-40' : 'bg-opacity-0 pointer-events-none'}`} onClick={onClose}></div>\n      \n      {showCamera && <CameraView onCapture={onCameraCapture} onClose={() => setShowCamera(false)} setCameraError={setScanError} />}\n\n      <div className={`fixed bottom-0 left-0 right-0 bg-white rounded-t-2xl shadow-2xl transition-transform duration-300 ease-in-out z-50 max-w-md mx-auto ${isOpen ? 'translate-y-0' : 'translate-y-full'}`}>\n        <div className=\"p-4\">\n          <div className=\"w-12 h-1.5 bg-gray-300 rounded-full mx-auto mb-4\"></div>\n          <header className=\"flex justify-between items-center pb-2\">\n            <h2 className=\"text-lg font-bold text-gray-900\">{med ? 'Medication Details' : 'Add Medication'}</h2>\n            <button onClick={onClose} className=\"text-gray-400 hover:text-gray-700\"><XIcon /></button>\n          </header>\n          <form onSubmit={handleSubmit} className=\"space-y-4 pt-4\">\n            <input type=\"file\" accept=\"image/*\" ref={fileInputRef} onChange={onFileInputChange} className=\"hidden\" />\n            <button type=\"button\" onClick={() => setShowCamera(true)} disabled={isScanning} className=\"w-full flex justify-center items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2.5 px-4 rounded-lg transition-colors disabled:opacity-50\">\n                {isScanning ? (\n                    <><div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div><span>Scanning...</span></>\n                ) : (\n                    <><CameraIcon /> Scan with Camera</>\n                )}\n            </button>\n            <div className=\"text-center\">\n                <button type=\"button\" onClick={() => fileInputRef.current?.click()} className=\"text-sm text-blue-600 hover:underline font-medium\">\n                    Or upload an image\n                </button>\n            </div>\n            {scanError && <p className=\"text-red-500 text-sm text-center\">{scanError}</p>}\n            \n            <div>\n              <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-600 mb-1\">Drug Name</label>\n              <input id=\"name\" type=\"text\" value={name} onChange={(e) => setName(e.target.value)} className=\"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500\" required />\n            </div>\n            <div>\n              <label htmlFor=\"expiryDate\" className=\"block text-sm font-medium text-gray-600 mb-1\">Expiry Date</label>\n              <input id=\"expiryDate\" type=\"date\" value={expiryDate} onChange={(e) => setExpiryDate(e.target.value)} className=\"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500\" required />\n            </div>\n            <div>\n              <label htmlFor=\"manufacturer\" className=\"block text-sm font-medium text-gray-600 mb-1\">Manufacturer</label>\n              <input id=\"manufacturer\" type=\"text\" value={manufacturer} onChange={(e) => setManufacturer(e.target.value)} className=\"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n            </div>\n            <div>\n              <label htmlFor=\"batchNumber\" className=\"block text-sm font-medium text-gray-600 mb-1\">Batch Number</label>\n              <input id=\"batchNumber\" type=\"text\" value={batchNumber} onChange={(e) => setBatchNumber(e.target.value)} className=\"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n            </div>\n            <div>\n              <label htmlFor=\"stock\" className=\"block text-sm font-medium text-gray-600 mb-1\">In Stock (quantity)</label>\n              <input id=\"stock\" type=\"number\" value={stock} onChange={(e) => setStock(e.target.value)} className=\"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500\" required />\n            </div>\n\n            <div className=\"flex flex-col space-y-2 pt-4\">\n              <button type=\"submit\" className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-colors\">{med ? 'Update Medication' : 'Add to Inventory'}</button>\n              {med && <button type=\"button\" onClick={handleRemove} className=\"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg transition-colors\">Remove from Inventory</button>}\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default MedicationDetailSheet;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2196, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahes/OneDrive/Desktop/VIBE/Pharmasure-main/src/services/pharmacist-medication-service.ts"],"sourcesContent":["import { Firestore, collection, doc, setDoc, deleteDoc, updateDoc, Timestamp } from 'firebase/firestore';\nimport type { Medication } from '@/lib/pharma/types';\n\nexport interface PharmacistMedication extends Medication {\n  manufacturer?: string;\n  batchNumber?: string;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport async function saveMedication(\n  firestore: Firestore,\n  userId: string,\n  medData: Omit<Medication, 'id'> & { id?: string; manufacturer?: string; batchNumber?: string }\n): Promise<string> {\n  const medsCollection = collection(firestore, 'users', userId, 'pharmacist_inventory');\n  \n  if (medData.id) {\n    // Update existing medication\n    const medDocRef = doc(medsCollection, medData.id);\n    await updateDoc(medDocRef, {\n      ...medData,\n      updatedAt: new Date().toISOString(),\n    });\n    return medData.id;\n  } else {\n    // Create new medication\n    const newMedDocRef = doc(medsCollection);\n    const medication: PharmacistMedication = {\n      id: newMedDocRef.id,\n      name: medData.name,\n      expiryDate: medData.expiryDate,\n      stock: medData.stock,\n      manufacturer: medData.manufacturer,\n      batchNumber: medData.batchNumber,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n    \n    await setDoc(newMedDocRef, medication);\n    return newMedDocRef.id;\n  }\n}\n\nexport async function deleteMedication(\n  firestore: Firestore,\n  userId: string,\n  medId: string\n): Promise<void> {\n  const medDocRef = doc(firestore, 'users', userId, 'pharmacist_inventory', medId);\n  await deleteDoc(medDocRef);\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAUO,eAAe,eACpB,SAAoB,EACpB,MAAc,EACd,OAA8F;IAE9F,MAAM,iBAAiB,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,WAAW,SAAS,QAAQ;IAE9D,IAAI,QAAQ,EAAE,EAAE;QACd,6BAA6B;QAC7B,MAAM,YAAY,CAAA,GAAA,iKAAA,CAAA,MAAG,AAAD,EAAE,gBAAgB,QAAQ,EAAE;QAChD,MAAM,CAAA,GAAA,iKAAA,CAAA,YAAS,AAAD,EAAE,WAAW;YACzB,GAAG,OAAO;YACV,WAAW,IAAI,OAAO,WAAW;QACnC;QACA,OAAO,QAAQ,EAAE;IACnB,OAAO;QACL,wBAAwB;QACxB,MAAM,eAAe,CAAA,GAAA,iKAAA,CAAA,MAAG,AAAD,EAAE;QACzB,MAAM,aAAmC;YACvC,IAAI,aAAa,EAAE;YACnB,MAAM,QAAQ,IAAI;YAClB,YAAY,QAAQ,UAAU;YAC9B,OAAO,QAAQ,KAAK;YACpB,cAAc,QAAQ,YAAY;YAClC,aAAa,QAAQ,WAAW;YAChC,WAAW,IAAI,OAAO,WAAW;YACjC,WAAW,IAAI,OAAO,WAAW;QACnC;QAEA,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE,cAAc;QAC3B,OAAO,aAAa,EAAE;IACxB;AACF;AAEO,eAAe,iBACpB,SAAoB,EACpB,MAAc,EACd,KAAa;IAEb,MAAM,YAAY,CAAA,GAAA,iKAAA,CAAA,MAAG,AAAD,EAAE,WAAW,SAAS,QAAQ,wBAAwB;IAC1E,MAAM,CAAA,GAAA,iKAAA,CAAA,YAAS,AAAD,EAAE;AAClB","debugId":null}},
    {"offset": {"line": 2240, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahes/OneDrive/Desktop/VIBE/Pharmasure-main/src/lib/pharma/sample-data.ts"],"sourcesContent":["import type { Medication } from './types';\n\nexport const generateSampleMedications = (): Omit<Medication, 'id'>[] => {\n  const prefixes = ['Liso', 'Atorva', 'Metfor', 'Amlodi', 'Omepra', 'Sertra', 'Fluoxe', 'Citalo', 'Parace', 'Ibupro'];\n  const suffixes = ['pril', 'statin', 'min', 'pine', 'zole', 'line', 'tine', 'pram', 'mol', 'fen'];\n  const strengths = ['5mg', '10mg', '20mg', '40mg', '50mg', '80mg', '100mg', '250mg', '500mg'];\n  const medications: Omit<Medication, 'id'>[] = [];\n\n  // Create sample medications with guaranteed diversity\n  const createMed = (name: string, daysOffset: number, stock: number): Omit<Medication, 'id'> => {\n    const expiryDate = new Date();\n    expiryDate.setDate(expiryDate.getDate() + daysOffset);\n    return {\n      name,\n      expiryDate: expiryDate.toISOString(),\n      stock,\n    };\n  };\n\n  // Add expired medications\n  medications.push(createMed('Expirophen 20mg', -15, 30));\n  medications.push(createMed('Pastduecillin 50mg', -90, 15));\n  medications.push(createMed('Gonebadazole 100mg', -4, 50));\n\n  // Add expiring-soon medications\n  medications.push(createMed('Almostix 10mg', 5, 45));\n  medications.push(createMed('Soontogo 250mg', 25, 22));\n  medications.push(createMed('Limitil 5mg', 1, 60));\n  medications.push(createMed('Clocks ticking Forte', 12, 18));\n\n  // Generate additional safe medications\n  for (let i = 0; i < 13; i++) {\n    const name = `${prefixes[i % prefixes.length]}${suffixes[i % suffixes.length]} ${strengths[i % strengths.length]}`;\n    const daysOffset = Math.floor(Math.random() * 600) + 60; // 2 months to 2 years\n    const expiryDate = new Date();\n    expiryDate.setDate(expiryDate.getDate() + daysOffset);\n    medications.push({\n      name,\n      expiryDate: expiryDate.toISOString(),\n      stock: Math.floor(Math.random() * 200) + 10,\n    });\n  }\n\n  return medications;\n};\n"],"names":[],"mappings":";;;AAEO,MAAM,4BAA4B;IACvC,MAAM,WAAW;QAAC;QAAQ;QAAU;QAAU;QAAU;QAAU;QAAU;QAAU;QAAU;QAAU;KAAS;IACnH,MAAM,WAAW;QAAC;QAAQ;QAAU;QAAO;QAAQ;QAAQ;QAAQ;QAAQ;QAAQ;QAAO;KAAM;IAChG,MAAM,YAAY;QAAC;QAAO;QAAQ;QAAQ;QAAQ;QAAQ;QAAQ;QAAS;QAAS;KAAQ;IAC5F,MAAM,cAAwC,EAAE;IAEhD,sDAAsD;IACtD,MAAM,YAAY,CAAC,MAAc,YAAoB;QACnD,MAAM,aAAa,IAAI;QACvB,WAAW,OAAO,CAAC,WAAW,OAAO,KAAK;QAC1C,OAAO;YACL;YACA,YAAY,WAAW,WAAW;YAClC;QACF;IACF;IAEA,0BAA0B;IAC1B,YAAY,IAAI,CAAC,UAAU,mBAAmB,CAAC,IAAI;IACnD,YAAY,IAAI,CAAC,UAAU,sBAAsB,CAAC,IAAI;IACtD,YAAY,IAAI,CAAC,UAAU,sBAAsB,CAAC,GAAG;IAErD,gCAAgC;IAChC,YAAY,IAAI,CAAC,UAAU,iBAAiB,GAAG;IAC/C,YAAY,IAAI,CAAC,UAAU,kBAAkB,IAAI;IACjD,YAAY,IAAI,CAAC,UAAU,eAAe,GAAG;IAC7C,YAAY,IAAI,CAAC,UAAU,wBAAwB,IAAI;IAEvD,uCAAuC;IACvC,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,IAAK;QAC3B,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,SAAS,MAAM,CAAC,GAAG,QAAQ,CAAC,IAAI,SAAS,MAAM,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,IAAI,UAAU,MAAM,CAAC,EAAE;QAClH,MAAM,aAAa,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,OAAO,IAAI,sBAAsB;QAC/E,MAAM,aAAa,IAAI;QACvB,WAAW,OAAO,CAAC,WAAW,OAAO,KAAK;QAC1C,YAAY,IAAI,CAAC;YACf;YACA,YAAY,WAAW,WAAW;YAClC,OAAO,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,OAAO;QAC3C;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 2319, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahes/OneDrive/Desktop/VIBE/Pharmasure-main/src/app/%28pages%29/pharmacist-dashboard/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport type { Medication, ViewType } from '@/lib/pharma/types';\nimport InventoryView from '@/components/pharma/InventoryView';\nimport DashboardView from '@/components/pharma/DashboardView';\nimport BottomNavBar from '@/components/pharma/BottomNavBar';\nimport MedicationDetailSheet from '@/components/pharma/MedicationDetailSheet';\nimport { useUser, useFirestore, useMemoFirebase } from '@/firebase';\nimport { useRouter } from 'next/navigation';\nimport { LogOut, Loader2 } from 'lucide-react';\nimport { getAuth, signOut } from 'firebase/auth';\nimport { Button } from '@/components/ui/button';\nimport { collection, query, orderBy } from 'firebase/firestore';\nimport { useCollection } from '@/firebase/firestore/use-collection';\nimport { saveMedication, deleteMedication } from '@/services/pharmacist-medication-service';\nimport { useToast } from '@/hooks/use-toast';\nimport { generateSampleMedications } from '@/lib/pharma/sample-data';\n\n\nconst LoadingSpinner: React.FC = () => (\n  <div className=\"flex flex-col items-center justify-center h-screen bg-gray-50\">\n    <div className=\"w-16 h-16 border-4 border-blue-500 border-dashed rounded-full animate-spin\"></div>\n    <p className=\"mt-4 text-lg text-gray-600\">Initializing Pharmasure...</p>\n  </div>\n);\n\nexport default function PharmacistDashboard() {\n  const [selectedMed, setSelectedMed] = useState<Medication | null>(null);\n  const [isDetailSheetOpen, setIsDetailSheetOpen] = useState(false);\n  const [activeView, setActiveView] = useState<ViewType>('inventory');\n  const { user, isUserLoading } = useUser();\n  const firestore = useFirestore();\n  const router = useRouter();\n  const { toast } = useToast();\n\n  // Fetch medications from Firestore\n  const medsQuery = useMemoFirebase(() => {\n    if (user && firestore) {\n      return query(\n        collection(firestore, 'users', user.uid, 'pharmacist_inventory'),\n        orderBy('updatedAt', 'desc')\n      );\n    }\n    return null;\n  }, [user, firestore]);\n\n  const { data: meds, isLoading: isLoadingMeds, error: medsError } = useCollection<Medication>(medsQuery);\n  const [isLoadingSample, setIsLoadingSample] = useState(false);\n\n  // Check if user is pharmacist and redirect if not\n  useEffect(() => {\n    if (!isUserLoading && (!user || user.role !== 'pharmacist')) {\n      router.push('/login');\n    }\n  }, [user, isUserLoading, router]);\n\n  const openDetailSheet = useCallback((med: Medication | null) => {\n    setSelectedMed(med);\n    setIsDetailSheetOpen(true);\n  }, []);\n  \n  const closeDetailSheet = useCallback(() => {\n    setIsDetailSheetOpen(false);\n    setSelectedMed(null);\n  }, []);\n\n  const onSave = useCallback(async (medData: Omit<Medication, 'id'> & { id?: string; manufacturer?: string; batchNumber?: string }) => {\n    if (!firestore || !user) {\n      toast({ title: 'Error', description: 'Please log in to save medications', variant: 'destructive' });\n      return;\n    }\n\n    try {\n      await saveMedication(firestore, user.uid, medData);\n      toast({ \n        title: medData.id ? 'Updated' : 'Added', \n        description: `${medData.name} has been ${medData.id ? 'updated' : 'added to inventory'}` \n      });\n      closeDetailSheet();\n    } catch (error) {\n      console.error('Error saving medication:', error);\n      toast({ title: 'Save Failed', description: 'Could not save medication', variant: 'destructive' });\n    }\n  }, [firestore, user, toast, closeDetailSheet]);\n\n  const onRemove = useCallback(async (medId: string) => {\n    if (!firestore || !user) return;\n\n    try {\n      await deleteMedication(firestore, user.uid, medId);\n      toast({ title: 'Removed', description: 'Medication removed from inventory' });\n      closeDetailSheet();\n    } catch (error) {\n      console.error('Error removing medication:', error);\n      toast({ title: 'Remove Failed', description: 'Could not remove medication', variant: 'destructive' });\n    }\n  }, [firestore, user, toast, closeDetailSheet]);\n\n  const handleLoadSampleData = useCallback(async () => {\n    if (!firestore || !user || isLoadingSample) return;\n\n    setIsLoadingSample(true);\n    try {\n      const sampleMeds = generateSampleMedications();\n      \n      // Save all sample medications\n      for (const med of sampleMeds) {\n        await saveMedication(firestore, user.uid, med);\n      }\n      \n      toast({ \n        title: 'Sample Data Loaded', \n        description: `${sampleMeds.length} medications added to your inventory` \n      });\n    } catch (error) {\n      console.error('Error loading sample data:', error);\n      toast({ \n        title: 'Load Failed', \n        description: 'Could not load sample data', \n        variant: 'destructive' \n      });\n    } finally {\n      setIsLoadingSample(false);\n    }\n  }, [firestore, user, isLoadingSample, toast]);\n\n  const handleLogout = async () => {\n    const auth = getAuth();\n    await signOut(auth);\n    router.push('/login');\n  };\n\n  if (isUserLoading || isLoadingMeds) {\n    return <LoadingSpinner />;\n  }\n\n  if (medsError) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-screen bg-gray-50\">\n        <p className=\"text-lg text-red-600\">Error loading medications</p>\n        <Button onClick={() => router.push('/login')} className=\"mt-4\">Back to Login</Button>\n      </div>\n    );\n  }\n\n  if (!user || user.role !== 'pharmacist') {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-gray-100 text-gray-800 min-h-screen font-sans flex justify-center\">\n      <div className=\"w-full max-w-md bg-white shadow-lg flex flex-col relative overflow-hidden\">\n          {/* Logout Button */}\n          <div className=\"absolute top-4 right-4 z-30\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={handleLogout}\n              className=\"flex items-center gap-2\"\n            >\n              <LogOut className=\"h-4 w-4\" />\n              Logout\n            </Button>\n          </div>\n\n          {activeView === 'inventory' ? (\n              <InventoryView \n                meds={meds || []} \n                onOpenDetailSheet={openDetailSheet}\n                onLoadSampleData={!isLoadingSample ? handleLoadSampleData : undefined}\n              />\n          ) : (\n              <DashboardView meds={meds || []} />\n          )}\n\n          <BottomNavBar\n              activeView={activeView}\n              onNavigate={setActiveView}\n              onAdd={() => openDetailSheet(null)}\n          />\n\n          <MedicationDetailSheet\n              isOpen={isDetailSheetOpen}\n              med={selectedMed}\n              onSave={onSave}\n              onRemove={onRemove}\n              onClose={closeDetailSheet}\n          />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}